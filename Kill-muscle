-- Auto Kill Supremo Hub CELULAR 2026 - COMPLETO Y FIJADO
-- Single player por PARTE del nombre + NO se bugea "todos" + GUI siempre aparece

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer

_G.AutoKillEnabled = false
_G.AutoKillAll = true
_G.TargetPlayerName = ""
_G.Whitelist = {"MissSherya"}

-- Buscar jugador por PARTE del nombre (ignore mayúsculas)
local function findTarget(inputName)
    if inputName == "" then return nil end
    local lowerInput = inputName:lower()
    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Name:lower():find(lowerInput) then
            return plr
        end
    end
    return nil
end

local function isWhitelisted(plr)
    for _, name in ipairs(_G.Whitelist) do
        if plr.Name:lower() == name:lower() then return true end
    end
    return false
end

local function equipPunch()
    local char = LocalPlayer.Character
    if not char then return end
    local backpack = LocalPlayer.Backpack
    if char:FindFirstChild("Punch") then return end
    local tool = backpack:FindFirstChild("Punch")
    if tool then tool.Parent = char end
end

local function isValidTarget(plr)
    if plr == LocalPlayer or isWhitelisted(plr) then return false end
    local char = plr.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") or not char:FindFirstChild("Humanoid") then return false end
    if char.Humanoid.Health <= 0 then return false end
    return true
end

-- Auto join brawl
local function autoJoinBrawl()
    local rEvents = ReplicatedStorage:FindFirstChild("rEvents")
    if rEvents and rEvents:FindFirstChild("brawlEvent") then
        pcall(function() rEvents.brawlEvent:FireServer("joinBrawl") end)
    end
end

-- LOOP PRINCIPAL (con delay para no bug)
task.spawn(function()
    while task.wait(0.03) do
        if not _G.AutoKillEnabled then continue end
        if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then continue end
        
        equipPunch()
        autoJoinBrawl()
        
        local char = LocalPlayer.Character
        local left = char:FindFirstChild("LeftHand")
        local right = char:FindFirstChild("RightHand")
        
        if left or right then
            pcall(function() LocalPlayer.muscleEvent:FireServer("punch", "leftHand") end)
            pcall(function() LocalPlayer.muscleEvent:FireServer("punch", "rightHand") end)
            
            local targets = {}
            if _G.AutoKillAll then
                for _, plr in pairs(Players:GetPlayers()) do
                    if isValidTarget(plr) then table.insert(targets, plr) end
                end
            else
                local target = findTarget(_G.TargetPlayerName)
                if target then table.insert(targets, target) end
            end
            
            for _, plr in pairs(targets) do
                local root = plr.Character.HumanoidRootPart
                if left then
                    firetouchinterest(root, left, 0)
                    firetouchinterest(root, left, 1)
                end
                if right then
                    firetouchinterest(root, right, 0)
                    firetouchinterest(root, right, 1)
                end
            end
        end
    end
end)

-- ================== GUI COMPLETA ==================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KillHubMobile"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 320)
frame.Position = UDim2.new(0.5, -140, 0.5, -160)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
title.Text = "AUTO KILL SUPREMO"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = frame

local y = 40

-- Toggle Auto Kill
local btnOn = Instance.new("TextButton")
btnOn.Size = UDim2.new(1, -20, 0, 35)
btnOn.Position = UDim2.new(0, 10, 0, y)
btnOn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
btnOn.Text = "AUTO KILL: OFF"
btnOn.TextSize = 16
btnOn.Parent = frame
btnOn.MouseButton1Click:Connect(function()
    _G.AutoKillEnabled = not _G.AutoKillEnabled
    btnOn.Text = "AUTO KILL: "..(_G.AutoKillEnabled and "ON" or "OFF")
    btnOn.BackgroundColor3 = _G.AutoKillEnabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
end)
y += 45

-- Matar a Todos
local btnAll = Instance.new("TextButton")
btnAll.Size = UDim2.new(1, -20, 0, 35)
btnAll.Position = UDim2.new(0, 10, 0, y)
btnAll.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
btnAll.Text = "MATAR A TODOS: ON"
btnAll.TextSize = 16
btnAll.Parent = frame
btnAll.MouseButton1Click:Connect(function()
    _G.AutoKillAll = not _G.AutoKillAll
    btnAll.Text = "MATAR A TODOS: "..(_G.AutoKillAll and "ON" or "OFF")
end)
y += 45

-- Target Player
local targetBox = Instance.new("TextBox")
targetBox.Size = UDim2.new(1, -20, 0, 35)
targetBox.Position = UDim2.new(0, 10, 0, y)
targetBox.PlaceholderText = "Parte del nombre"
targetBox.TextSize = 14
targetBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
targetBox.TextColor3 = Color3.new(1,1,1)
targetBox.Parent = frame
targetBox.FocusLost:Connect(function(enter)
    if enter and targetBox.Text ~= "" then
        _G.TargetPlayerName = targetBox.Text
        local found = findTarget(_G.TargetPlayerName)
        local msg = found and ("Target: "..found.Name) or "No encontrado"
        StarterGui:SetCore("SendNotification",{Title="Kill Hub",Text=msg,Duration=4})
    end
end)
y += 45

-- Whitelist
local whiteBox = Instance.new("TextBox")
whiteBox.Size = UDim2.new(1, -20, 0, 35)
whiteBox.Position = UDim2.new(0, 10, 0, y)
whiteBox.PlaceholderText = "Agregar a Whitelist"
whiteBox.TextSize = 14
whiteBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
whiteBox.TextColor3 = Color3.new(1,1,1)
whiteBox.Parent = frame
whiteBox.FocusLost:Connect(function(enter)
    if enter and whiteBox.Text ~= "" then
        table.insert(_G.Whitelist, whiteBox.Text)
        StarterGui:SetCore("SendNotification",{Title="Kill Hub",Text="Whitelist: "..whiteBox.Text,Duration=3})
        whiteBox.Text = ""
    end
end)

-- Botón X
local hideBtn = Instance.new("TextButton")
hideBtn.Size = UDim2.new(0, 25, 0, 25)
hideBtn.Position = UDim2.new(1, -30, 0, 3)
hideBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
hideBtn.Text = "X"
hideBtn.TextSize = 18
hideBtn.Parent = frame
hideBtn.MouseButton1Click:Connect(function() frame.Visible = false end)

-- Esquinas redondeadas
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame
for _, obj in pairs(frame:GetChildren()) do
    if obj:IsA("GuiButton") or obj:IsA("TextBox") then
        Instance.new("UICorner", obj).CornerRadius = UDim.new(0, 8)
    end
end

-- BOTÓN FLOTANTE
local floatBtn = Instance.new("TextButton")
floatBtn.Size = UDim2.new(0, 50, 0, 50)
floatBtn.Position = UDim2.new(0.95, -50, 0.1, -50)
floatBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
floatBtn.Text = "Hub"
floatBtn.TextSize = 14
floatBtn.Parent = screenGui
floatBtn.MouseButton1Click:Connect(function()
    frame.Visible = not frame.Visible
end)
Instance.new("UICorner", floatBtn).CornerRadius = UDim.new(1, 0)

-- Notificación de carga
StarterGui:SetCore("SendNotification",{
    Title = "Kill Supremo",
    Text = "Hub cargado! Usa la bolita verde para mostrar/ocultar",
    Duration = 6
})

print("Auto Kill Supremo Hub CELULAR cargado correctamente!")
